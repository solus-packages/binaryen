name       : binaryen
version    : '99'
release    : 5
source     :
    - https://github.com/WebAssembly/binaryen/archive/version_99.tar.gz : 66ac4430367f2096466703b81749db836d8f4766e542b042d64e78b601372cf7
license    : Apache-2.0
homepage   : https://github.com/WebAssembly/binaryen
component  : programming
summary    : Compiler infrastructure and toolchain library for WebAssembly
description: |
    Binaryen is a compiler and toolchain infrastructure library for WebAssembly, written in C++
setup      : |
    %patch -p1 < $pkgfiles/libbinaryen-soname.patch
    sed -i "s/bin\/wasm-opt test/bin\/wasm-opt ..\/test/g" CMakeLists.txt
    %cmake_ninja
build      : |
    %ninja_build
install    : |
    %ninja_install
    install -Dm00755 $pkgfiles/50-binaryen.sh $installdir/usr/share/defaults/etc/profile.d/50-binaryen.sh
